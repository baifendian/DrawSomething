<?xml version="1.0" encoding="GBK"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cmcc.dao.UserDao">

	<resultMap id="BaseResultMap" type="com.cmcc.po.User">
		<result column="id" property="id" />
		<result column="username" property="username" />
		<result column="nick" property="nick" />
		<result column="password" property="password" />
		<result column="is_manager" property="isManager" />
		<result column="photo_url" property="photoUrl" />
		<result column="create_time" property="createTime" />
		<result column="update_time" property="updateTime" />
		<result column="extend_1" property="extend1" />
		<result column="extend_2" property="extend2" />
		<result column="extend_3" property="extend3" />
		<result column="extend_4" property="extend4" />
		<result column="extend_5" property="extend5" />
	</resultMap>

	<sql id="Base_Column_List" >
    	id, username, nick, password, is_manager, photo_url, create_time, update_time, extend_1, extend_2, extend_3, extend_4, extend_5
  	</sql>
	<select id="findByPrimaryKey" resultMap="BaseResultMap" parameterType="java.io.Serializable">
		select
		<include refid="Base_Column_List" />
		from USER
		where
		id = #{id}
	</select>

	<select id="findByCondition" resultMap="BaseResultMap" parameterType="java.io.Serializable">
		select
		<include refid="Base_Column_List" />
		from USER
		where
		${condition}
	</select>
	<select id="findAll" resultMap="BaseResultMap">
		select 
		<include refid="Base_Column_List" />
		from USER
	</select>

	<delete id="deleteByPrimaryKey" parameterType="java.io.Serializable">
		delete from USER
		where
		id = #{id}
	</delete>
	
	<delete id="deleteByCondition" parameterType="java.io.Serializable">
		delete from USER
		where
		${condition}
	</delete>

	<delete id="deleteAll">
		delete from USER
	</delete>

	<insert id="create" parameterType="com.cmcc.po.User" useGeneratedKeys="true" keyProperty="id">
		insert into USER (<include refid="Base_Column_List" />)
		values (
		#{id, javaType=Long, jdbcType=BIGINT},
		#{username, javaType=String, jdbcType=VARCHAR},
		#{nick, javaType=String, jdbcType=VARCHAR},
		#{password, javaType=String, jdbcType=VARCHAR},
		#{isManager, javaType=Integer, jdbcType=TINYINT},
		#{photoUrl, javaType=String, jdbcType=VARCHAR},
		#{createTime, javaType=Date, jdbcType=TIMESTAMP},
		#{updateTime, javaType=Date, jdbcType=TIMESTAMP},
		#{extend1, javaType=String, jdbcType=VARCHAR},
		#{extend2, javaType=String, jdbcType=VARCHAR},
		#{extend3, javaType=String, jdbcType=VARCHAR},
		#{extend4, javaType=String, jdbcType=VARCHAR},
		#{extend5, javaType=String, jdbcType=VARCHAR}
		)
	<!--<selectKey resultType="String" order="AFTER" keyProperty="id"> 
			SELECT LAST_INSERT_ID() 
		</selectKey>  -->	
	</insert>
	
		<insert id="save" parameterType="com.cmcc.po.User" keyProperty="id">
		insert into USER (<include refid="Base_Column_List" />)
		values (
		#{id, javaType=Long, jdbcType=BIGINT},
		#{username, javaType=String, jdbcType=VARCHAR},
		#{nick, javaType=String, jdbcType=VARCHAR},
		#{password, javaType=String, jdbcType=VARCHAR},
		#{isManager, javaType=Integer, jdbcType=TINYINT},
		#{photoUrl, javaType=String, jdbcType=VARCHAR},
		#{createTime, javaType=Date, jdbcType=TIMESTAMP},
		#{updateTime, javaType=Date, jdbcType=TIMESTAMP},
		#{extend1, javaType=String, jdbcType=VARCHAR},
		#{extend2, javaType=String, jdbcType=VARCHAR},
		#{extend3, javaType=String, jdbcType=VARCHAR},
		#{extend4, javaType=String, jdbcType=VARCHAR},
		#{extend5, javaType=String, jdbcType=VARCHAR}
		)
	</insert>
		
	<update id="update" parameterType="com.cmcc.po.User">
	  update USER 
	   <trim prefix="SET" suffixOverrides=",">   
	  		<if test="username != null and username != ''">
				username = #{username, javaType=String, jdbcType=VARCHAR},
		</if>
		<if test="nick != null and nick != ''">
				nick = #{nick, javaType=String, jdbcType=VARCHAR},
		</if>
		<if test="password != null and password != ''">
				password = #{password, javaType=String, jdbcType=VARCHAR},
		</if>
		<if test="isManager != null and isManager != ''">
				is_manager = #{isManager, javaType=Integer, jdbcType=TINYINT},
		</if>
		<if test="photoUrl != null and photoUrl != ''">
				photo_url = #{photoUrl, javaType=String, jdbcType=VARCHAR},
		</if>
		<if test="createTime != null and createTime != ''">
				create_time = #{createTime, javaType=Date, jdbcType=TIMESTAMP},
		</if>
		<if test="updateTime != null and updateTime != ''">
				update_time = #{updateTime, javaType=Date, jdbcType=TIMESTAMP},
		</if>
		<if test="extend1 != null and extend1 != ''">
				extend_1 = #{extend1, javaType=String, jdbcType=VARCHAR},
		</if>
		<if test="extend2 != null and extend2 != ''">
				extend_2 = #{extend2, javaType=String, jdbcType=VARCHAR},
		</if>
		<if test="extend3 != null and extend3 != ''">
				extend_3 = #{extend3, javaType=String, jdbcType=VARCHAR},
		</if>
		<if test="extend4 != null and extend4 != ''">
				extend_4 = #{extend4, javaType=String, jdbcType=VARCHAR},
		</if>
		<if test="extend5 != null and extend5 != ''">
				extend_5 = #{extend5, javaType=String, jdbcType=VARCHAR}
		</if>
 </trim>	
	    where
		id = #{id}
	  
	</update>


	<select id="getTotal"  resultType="java.lang.Integer">
	  SELECT COUNT(*) FROM USER
	</select>
	
	<select id="getTotalByCondition"  resultType="java.lang.Integer" parameterType="java.io.Serializable">
	  SELECT COUNT(*) FROM USER
	  where
	  ${condition}
	</select>
	
	<delete id="deleteList" parameterType="java.util.List">
	   delete USER  WHERE id IN
		<foreach collection="list" index="index" item="sn" open="(" separator="," close=")">
			#{sn}
		</foreach>
    </delete>
    
    <select id="findByPrimaryKeyPage" resultMap="BaseResultMap" parameterType="java.util.Map">
		
		<![CDATA[ ]]>
		SELECT 
		 <include refid="Base_Column_List" />
		FROM
		USER
		order by 
		id
		desc
		limit
		#{startIndex} ,#{pageSize}
		
		
	</select>
	
	    <select id="findPageByCondition" resultMap="BaseResultMap" parameterType="java.util.Map">
		
		<![CDATA[ ]]>
		SELECT 
		 <include refid="Base_Column_List" />
		FROM
		USER
		where
		${condition}
		order by 
		id
		desc
		limit
		#{startIndex} ,#{pageSize}
		
		
	</select>
	<!--codegen -->

</mapper>